<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Johnny Five: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Johnny Five
   </div>
   <div id="projectbrief">Johnny Five, an ELMA based robot simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Johnny Five Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>## Introduction </h2>
<p>This repo forms the submittal for the final project of ECEP 590 - Software Engineering for Embedded applications offered as part of the Professional Masters Program in Electrical Engineering at the University of Washington.</p>
<h2>## Project Goals </h2>
<p>This project will, using the robot state machine from the <a href="https://github.com/klavins/ECEP520/tree/master/week_7" title="ECEP520 Week 8">week 8 homework</a>, create a more realistic simulation of a security patrol robot.</p>
<p>This will be done using the <a href="http://klavinslab.org/elma/" title="Elma Main Page">ELMA</a> event loop and process manager that was developed during the ECEP 590 Winter class at the University of Washington and the code produced for the <a href="https://github.com/klavins/ECEP520/tree/master/week_7" title="ECEP520 Week 8">week 8 homework</a>.</p>
<p>During this project I would like expand on the robot state machine adding more realism to the system.</p>
<h2>## Installation </h2>
<p>```bash git clone <a href="https://github.com/scotthem/ECEP590_Final.git">https://github.com/scotthem/ECEP590_Final.git</a> cd ECEP590_Final docker run -v $PWD:/source -it klavins/elma:latest bash make make docs ```</p>
<h2>## Execution </h2>
<p>To run the robot, type ```bash server/bin/server &amp; bin/robot ```</p>
<p>The robot is autonomous and will run without user interaction. However, should you wish to you can use the following keyboard commands to force state changes:</p>
<ul>
<li><b>s</b>: Start</li>
<li><b>i</b>: Intruder Detected</li>
<li><b>p</b>: Proximity Warning</li>
<li><b>f</b>: Found Recharge StationS</li>
<li><b>r</b>: Reset</li>
<li><b>q</b>: Quit</li>
</ul>
<p>Note that only Start (<b>s</b>) and Quit (<b>q</b>) are displayed on the user interface.</p>
<h2>## Testing </h2>
<p>To run tests, do ```bash bin/test ``` Note that during testing simulated time is used.</p>
<h2>## Architecture </h2>
<p>The aim of this project was to implement the state machine shown in the following diagram:</p>
<div class="image">
<img src="images/robot.png"  width="620"/>
</div>
<p>&lt;/image&gt;</p>
<p>The state machine and states were created inheriting for the ELMA State and StateMahcine classes. The state machine is driven by events. In order to provide autonomy I created a <a class="el" href="classBattery.html">Battery</a> class that inherits from the ELMA Process class simulated a battery to emit the events related to the battery (low battery, charged etc...). I then created a user interface where I was able to force events using the keyboard.</p>
<p>After running into some issues regarding the multiple use of the Manager run() method during testing, at the recommendation of Prof. Klavins, implemented a <a class="el" href="classRobotTester.html">RobotTester</a> class which was another ELMA Process. This <a class="el" href="classRobotTester.html">RobotTester</a> class provides all of the stimulus not provided by the <a class="el" href="classBattery.html">Battery</a>.</p>
<p>Finally, I added a new State class, <a class="el" href="classRobotPostState.html">RobotPostState</a>, that during the entry method wrote a specified message to a server. The server in turn saves this message along with a timestamp in a log.txt file.</p>
<h2>## Results </h2>
<p>This project did not get off to a particularly good start. Thanks to Amazon Web Services Lambda (and not using JSON in an intuitive way) the start of the project was substantially delayed. The lack of my knowledge of make files proved to be my second stumbling block, taking the better part of two days to get a skeleton code compiled successfully.</p>
<p>However, once these hurdles were overcome I made steady progress until I ran into the limitations of my knowledge of ELMA. Ultimately I was able to get the robot to behave autonomously (see below for example from the UI).</p>
<div class="image">
<img src="images/UI.png"  width="240"/>
</div>
<p>&lt;/image&gt;</p>
<p>I was also able (at the last minute) able to implement a server/client that logged interesting events. I had hoped to achieve much more, especially as the week went on and I felt more and more comfortable with ELMA and C++ in general.</p>
<h2>## Acknowledgements </h2>
<p>Thanks to Professor E Klavins (University of Washington) and the ECE 520 Teaching Assistants for patiently answering this noobs questions.</p>
<p>Also to Mike O'Dell for the moral support and mutual commiseration when the homework took way longer than expected!</p>
<h2>## References </h2>
<p>Primary references were the ELMA and related pages located at:</p>
<p><a href="http://klavinslab.org/elma/">http://klavinslab.org/elma/</a> and <a href="http://klavinslab.org/elma_project/">http://klavinslab.org/elma_project/</a></p>
<p>as well as the online C++ references at:</p>
<p><a href="https://en.cppreference.com/w/">https://en.cppreference.com/w/</a> and <a href="http://www.cplusplus.com/">http://www.cplusplus.com/</a></p>
<h1>Previous Materials</h1>
<p>Below are archives of the project readme information (please forgive the over enthusiasm!) </p><hr/>
<p> I will create a simulation mode that implements a "simulated time" in order to speed up simulations and testing.</p>
<p>I will model the propulsion (motor) and power systems. This will including changing in current requirements for different activities (evade , make noise should require more power for example) and a charging ciruit that mirrors a real battery charging cycle.</p>
<p>I will add a monitoring server and onboard client that will broadcast the status and location of the robot.</p>
<p>I will simulate the motion of the robot around its patrol patter and implement a method to change patrol paterns to random, to fixed patrol patterns as defined by the user.</p>
<p>A stretch goal for the maping, patrol routes and power systems implementation of this would be to add the effects of terain, and the addition of obstacles and intruders that would be detected when within a given distance. However, this may be beyond my abilities in the time allotted.</p>
<h2>Milestones</h2>
<p>The following milestones will be used to report progress on the project, those not marked "**Stretch**" are considered to be the "complete" project.</p>
<p>[ ] Create directory structure, docker container for the project, complile using robot state machine example from <a href="https://github.com/klavins/ECEP520/tree/master/week_7" title="ECEP520 Week 8">week 8 homework</a>.</p>
<p>[ ] Identify a suitable method for implementing a "simulated time" in order to reduce the overall simulation time during testing.</p>
<p>[ ] Simulate the on power systems including realistic battery loading based upon the activity and a charge cycle with a typical recharge curve.</p>
<p>[ ] Allow the patrol robot to report position and status to a remote server at regular intervals as well as during events of interest.</p>
<p>[ ] Create set patrol patterns that can be simulated.</p>
<p>[ ] Create a suitable document set for the code.</p>
<p>[ ] <b>Stretch</b> Extend robot and patrol code to react automatically to simulated obstacles and intruders.</p>
<p>[ ] <b>Stretch</b> Extend the patrol patterns and power systems to include different terrain.</p>
<p>[ ] <b>Stretch</b> Create a simulated user control panel that would allow, for instance, deactivation of alarms, cancelling of patrols, force battery charging, chage patrol route, etc...</p>
<p>[ ] <b>Huge Stretch</b> Implement GUI for the user control and status. (Lets face it I have no idea where to start with this so probably won't happen. But hey, a guy has to have aspirations)</p>
<h2>Status Update (3/17/19)</h2>
<p>Well, didn't really get too far after spending 2+ days trying to get the AWS stuff working. I have some skeleton code up together and started working on some of the battery process. However ran into some issues with makefiles. Need to go away and do some research on these. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 24 2019 05:43:12 for Johnny Five by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
